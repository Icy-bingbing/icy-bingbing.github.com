<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Title</title>
	<style>
		*{
			margin: 0;
			padding: 0;
		}
		div{
			width: 1026px;
			margin:0 auto;
		}
		ul{
			width: 320px;
			float: left;
			border:1px solid #000;
			margin:10px;
		}
		li{
			list-style:none;
			width:300px;
			margin:10px;
		}
	</style>
	<script>
		function rnd(n,m){
			return parseInt(Math.random()*(m-n))+n;
		}
		function createLi(){
			var oLi=document.createElement('li');
			oLi.style.height=rnd(100,300)+'px';
			oLi.style.background='rgb('+rnd(1, 256)+','+rnd(1, 256)+','+rnd(1, 256)+')';
			return oLi;
		}
		window.onload=function(){
			var aUl=document.getElementsByTagName('ul');

			function create20(){
				for(var i=0; i<20; i++){
					var oLi=createLi();
					var arr=[];
					for(var j=0; j<aUl.length; j++){
						arr.push(aUl[j])
					}
					arr.sort(function(ul1,ul2){
						return ul1.offsetHeight-ul2.offsetHeight;
					})
					arr[0].appendChild(oLi);
				}
			}
			create20();

			window.onresize=window.onscroll=function(){
				var scrollTop=document.documentElement.scrollTop || document.body.scrollTop;
				var clientH=document.documentElement.clientHeight;
				var scrollBottom=scrollTop+clientH;

				var oH=document.documentElement.scrollHeight;
				if(scrollBottom>=oH-300){
					create20();
				}
			};
		};
	</script>
</head>
<body>
<div>
	<ul></ul>
	<ul></ul>
	<ul></ul>
</div>
</body>
</html>
















